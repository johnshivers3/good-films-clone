extends layout.pug

include utils.pug

append head
  //- add page specific styles by appending to the head
  link(rel="stylesheet" href="/stylesheets/basic-form.css")
  script(src='/javascripts/movie.js' type="module")
block content
    .body-form-container
        .body-form.movieInfo
            div.image
                span
                    img(src=movie.image, alt=movie.title)
            div.info
                div
                    label Movie:
                    span=movie.title
                div
                    label Genre:
                    span=movie.genre
                div
                    label Directors:
                    span=movie.directors
                div
                    label Actors:
                    span=movie.actors
                div
                    label Release Date:
                    span=movie.releaseDate
                div
                    label Description:
                    span=movie.description
                if locals.authenticated
                    div#addToCollectionsDiv
                        form
                            if collections
                                select#collectionSelect
                                    each collection in collections
                                        option(value=collection.id)= collection.name
                                input(type='hidden' id='movieId' value=movie.id)
                                button#addToCollection Add to Collection
                            if !collections
                                a(href=`/profile/${locals.user.id}`) Go to your profile page to make a new Collection!

        h1 Reviews
        +validationErrorSummary(errors)
        .body-form#reviewBox
            if locals.authenticated
                input(type='hidden' value=`${locals.user.firstName} ${locals.user.lastName}` id='userName')
                include create-review.pug

            #reviewsList
                each review in reviewsFormatted
                    .movieInfo.review-area
                        .userAndDate
                            div
                                label User:
                                span= review.user
                            div
                                label Date:
                                span= review.date
                            div 
                                label Rating: 
                                span= review.rating
                        .reviewContent
                            p= review.content





                //- div
                //-     input(type='button' onclick=`window.location='/movies/${movie.id}/${movie.title}/reviews'` value='Write a Review')
